---
# Common and path
glx_slashpackage_dir: "/package"
glx_sqmail_dir: "/var/qmail"
glx_supervise_dir: "/var/lib/supervise"
glx_service_dir: "/etc/service"
glx_multilog_dir: "/var/multilog"



galaxie_qmail_server_service_name: "qmail"
galaxie_qmail_server_service_send: "qmail-send"
galaxie_qmail_server_service_smtpd_ipv4: "qmail-smtpd-ipv4"
galaxie_qmail_server_service_smtpd_ipv6: "qmail-smtpd-ipv6"
galaxie_qmail_server_service_smtpsd_ipv4: "qmail-smtpsd-ipv4"
galaxie_qmail_server_service_smtpsd_ipv6: "qmail-smtpsd-ipv6"
galaxie_qmail_server_service_ipv4: "{{ ansible_default_ipv4.address }}"
galaxie_qmail_server_service_ipv6: "{{ ansible_all_ipv6_addresses[0] }}"
galaxie_qmail_server_service_ipv6_interface: "eth0"



# qmail-scanner
galaxie_qmail_server_qmail_scanner_user: "clamav"

# simscan
galaxie_qmail_server_simscan_user: "simscan"
galaxie_qmail_server_simscan_group: "simscan"

# Special

# via systemd
galaxie_qmail_server_config_send: true
galaxie_qmail_server_config_smtpd: true

# via dameon tools
galaxie_qmail_server_config_smtpd_ipv4: true
galaxie_qmail_server_config_smtpd_ipv6: false
galaxie_qmail_server_config_smtpsd_ipv4: true
galaxie_qmail_server_config_smtpsd_ipv6: false

# special - antispam
galaxie_qmail_server_config_qmail_scanner: false
galaxie_qmail_server_config_simscan: false
# special - smtproutes
galaxie_qmail_server_set_smtproutes: false
galaxie_qmail_server_control_smtproutes: ""
# special - virtualdomains
galaxie_qmail_server_set_virtualdomains: false
galaxie_qmail_server_control_virtualdomains: ""
# special - scripts
galaxie_qmail_server_install_qmailctl: true
galaxie_qmail_server_install_qfixpermissions: true

# Control
galaxie_qmail_server_domain: "galaxie.ici"
galaxie_qmail_server_control_me: "{{ ansible_hostname }}.{{ galaxie_qmail_server_domain }}"
galaxie_qmail_server_control_defaultdomain: "{{ galaxie_qmail_server_domain }}"
galaxie_qmail_server_control_plusdomain: "{{ galaxie_qmail_server_domain }}"

galaxie_qmail_server_control_locals:
  - "localhost"
  - "localhost.localdomain"
  - "{{ ansible_hostname }}"
  - "{{ ansible_hostname }}.{{ galaxie_qmail_server_domain }}"
  - "{{ galaxie_qmail_server_domain }}"
galaxie_qmail_server_control_rcpthosts:
  - "{{ galaxie_qmail_server_domain }}"

glx_sqmail_maildirname: "Maildir"
glx_sqmail_control_defaultdelivery: "./{{ glx_sqmail_maildirname }}/"
glx_sqmail_control_concurrencyremote: "255"
glx_sqmail_control_concurrencyincoming: "30"
glx_sqmail_control_spfbehavior: "3"
glx_sqmail_control_bouncefrom: "postmaster"
glx_sqmail_control_doublebouncehost: "{{ galaxie_qmail_server_domain }}"
glx_sqmail_control_doublebounceto: "postmaster"
glx_sqmail_control_databytes: "8000000"
glx_sqmail_control_timeoutsmtpd: "30"

# cdb
glx_cdb_force_install: true
glx_cdb_repository: "http://cr.yp.to/cdb"
glx_cdb_app_name: "cdb-0.75"
glx_cdb_extension: "tar.gz"
glx_cdb_download_url: "{{ glx_cdb_repository }}/{{ glx_cdb_app_name }}.{{ glx_cdb_extension }}"
glx_cdb_source_dir: "/usr/src"

# ucspi-tcp6
glx_ucspi_tcp6_force_install: true
glx_ucspi_tcp6_source_repository: "http://www.fehcom.de/ipnet/ucspi-tcp6"
glx_ucspi_tcp6_source_name: "ucspi-tcp6-1.00a"
glx_ucspi_tcp6_source_extension: "tgz"
glx_ucspi_tcp6_source_url: "{{ glx_ucspi_tcp6_source_repository }}/{{ glx_ucspi_tcp6_source_name }}.{{ glx_ucspi_tcp6_source_extension }}"
glx_ucspi_tcp6_source_dir: "/usr/src"

# ucspi-ssl
glx_ucspi_ssl_force_install: true
glx_ucspi_ssl_certificates_dir: "/etc/ssl/certs"
glx_ucspi_ssl_dh_parameter_file: "{{ glx_ucspi_ssl_certificates_dir }}/dhparam.pem"
glx_ucspi_ssl_dh_bits: "2048"
glx_ucspi_ssl_source_repository: "http://www.fehcom.de/ipnet/ucspi-ssl"
glx_ucspi_ssl_source_name: "ucspi-ssl-0.95b"
glx_ucspi_ssl_source_extension: "tgz"
glx_ucspi_ssl_source_sha256sum: "9f3bcf66546b433b089f6f340d243065beb801b97d4026e54dd586f0022b5f1e"
glx_ucspi_ssl_source_url: "{{ glx_ucspi_ssl_source_repository }}/{{ glx_ucspi_ssl_source_name }}.{{ glx_ucspi_ssl_source_extension }}"
glx_ucspi_ssl_source_dir: "/usr/src"


# The basic s/qmail configuration is done by means of conf-XX files (in alphabetic order):
#
# ./src/conf-cadir
glx_ucspi_ssl_conf_cadir_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-cadir"
# ./src/conf-cafile
glx_ucspi_ssl_conf_cafile_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-cafile"
# ./src/conf-cc.j2
glx_ucspi_ssl_conf_cc_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-cc.j2"
# ./src/conf-ccafile
glx_ucspi_ssl_conf_ccafile_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-ccafile"
# ./src/conf-ccperl
glx_ucspi_ssl_conf_ccperl_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-ccperl"
# ./src/conf-certchainfile
glx_ucspi_ssl_conf_certchainfile_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-certchainfile"
# ./src/conf-certfile
glx_ucspi_ssl_conf_certfile_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-certfile"
# ./src/conf-ciphers
glx_ucspi_ssl_conf_ciphers_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-ciphers"
# ./src/conf-dhfile
glx_ucspi_ssl_conf_dh_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-dhfile"
# ./src/conf-dl
glx_ucspi_ssl_conf_dl_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-dl"
# ./src/conf-keyfile
glx_ucspi_ssl_conf_key_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-keyfile"
# ./src/conf-ld
glx_ucspi_ssl_conf_ld_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-ld"
# ./src/conf-ldperl
glx_ucspi_ssl_conf_ldperl_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-ldperl"
# ./src/conf-perl
glx_ucspi_ssl_conf_perl_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-perl"
# ./src/conf-rsa
glx_ucspi_ssl_conf_rsa_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-rsa"
# ./src/conf-ssl
glx_ucspi_ssl_conf_ssl_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-ssl"
glx_ucspi_ssl_kerberos_include_dir: "/usr/include/krb5"
# ./src/conf-ssllib
glx_ucspi_ssl_conf_ssllib_file: "{{ glx_slashpackage_dir }}/host/superscript.com/net/{{ glx_ucspi_ssl_source_name }}/src/conf-ssllib"
# ./src/conf-tcpbin
# default /usr/local/bin
# This is the ucspi-tcp bin directory.  The ucspi-tcp executables should appear in it.
glx_ucspi_ssl_conf_tcpbin: "{{ glx_slashpackage_dir }}/host/superscript.com/net/ucspi-ssl-0.95b/src/conf-tcpbin"


# s/qmail
glx_sqmail_force_install: true
glx_sqmail_source_repository: "http://fehcom.de/sqmail"
glx_sqmail_source_name: "sqmail-3.0.2"
glx_sqmail_source_extension: "tgz"
glx_sqmail_source_url: "{{ glx_sqmail_source_repository }}/{{ glx_sqmail_source_name }}.{{ glx_sqmail_source_extension }}"
glx_sqmail_source_dir: "/usr/src"

# users
glx_sqmail_groups:
  nofiles:
    gname: "nofiles"
    gid: "2108"
    description: "sqmail group for auxiliar files"
  sqmail:
    gname: "sqmail"
    gid: "2109"
    description: "sqmail group for binary files"

glx_sqmail_ids:
  alias:
    uname: "alias"
    uid: "7790"
    description: "sqmail Alias user"
    group: "{{ glx_sqmail_groups.nofiles.gname }}"
  qmaild:
    uname: "qmaild"
    uid: "7791"
    description: "sqmail Daemon user"
    group: "{{ glx_sqmail_groups.nofiles.gname }}"
  qmaill:
    uname: "qmaill"
    uid: "7792"
    description: "sqmail Log user"
    group: "{{ glx_sqmail_groups.nofiles.gname }}"
  qmailp:
    uname: "qmailp"
    uid: "7793"
    description: "sqmail Password user"
    group: "{{ glx_sqmail_groups.nofiles.gname }}"
  qmailq:
    uname: "qmailq"
    uid: "7794"
    description: "sqmail Queue user"
    group: "{{ glx_sqmail_groups.sqmail.gname }}"
  qmailr:
    uname: "qmailr"
    uid: "7795"
    description: "sqmail Remote user"
    group: "{{ glx_sqmail_groups.sqmail.gname }}"
  qmails:
    uname: "qmails"
    uid: "7796"
    description: "sqmail Send user"
    group: "{{ glx_sqmail_groups.sqmail.gname }}"
  sqmtls:
    uname: "sqmtls"
    uid: "7797"
    description: "sqmail TLS user"
    group: "{{ glx_sqmail_groups.nofiles.gname }}"

# common setting
glx_sqmail_service_scripts_dir: "{{ glx_slashpackage_dir }}/mail/sqmail/{{ glx_sqmail_source_name }}/service"
glx_sqmail_conf_thing_dir: "{{ glx_slashpackage_dir }}/mail/sqmail/{{ glx_sqmail_source_name }}"
glx_sqmail_package_dir: "{{ glx_slashpackage_dir }}/mail/sqmail/{{ glx_sqmail_source_name }}/package"

# certificate
galaxie_qmail_server_openssl_key_gen: false
galaxie_qmail_server_openssl_key_bit: "2048"
galaxie_qmail_server_openssl_key_days: "3650"
galaxie_qmail_server_openssl_cert_C: "FR"
galaxie_qmail_server_openssl_cert_ST: "Ile-de-France"
galaxie_qmail_server_openssl_cert_L: "Paris"
galaxie_qmail_server_openssl_cert_O: "Galaxie"
galaxie_qmail_server_openssl_cert_OU: "IT"
galaxie_qmail_server_openssl_cert_CN: "{{ ansible_hostname }}.{{ galaxie_qmail_server_domain }}"
galaxie_qmail_server_openssl_subj: "/C={{ galaxie_qmail_server_openssl_cert_C }}/ST={{ galaxie_qmail_server_openssl_cert_ST }}/L={{ galaxie_qmail_server_openssl_cert_L }}/O={{ galaxie_qmail_server_openssl_cert_O }}/OU={{ galaxie_qmail_server_openssl_cert_OU }}/CN={{ galaxie_qmail_server_openssl_cert_CN }}"

# Alias creation
# http://www.qmail.org/man/man5/dot-qmail.html
glx_sqmail_alias_admins_list:
  - name: "root"
    value:
      - "root@{{ galaxie_qmail_server_domain }}"
  - name: "postmaster"
    value:
      - "root@{{ galaxie_qmail_server_domain }}"
  - name: "mailer-daemon"
    value:
      - "root@{{ galaxie_qmail_server_domain }}"
      
glx_sqmail_alias_users_list:
  - name: "lulu"
    value:
      - "lulu@galaxie.ici"
  - name: "boris"
    value:
      - "boris@galaxie.ici"
      - "lulu@galaxie.ici"

